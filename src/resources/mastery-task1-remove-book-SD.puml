@startuml
actor User
participant "RemoveBookFromCatalogActivity"
participant "CatalogDao"
participant "PublishingStatusDao"
participant "CatalogItemVersion"
participant "BookNotFoundException"
participant "RemoveBookFromCatalogRequest"
participant "RemoveBookFromCatalogResponse"

User -> RemoveBookFromCatalogActivity: RemoveBookFromCatalogRequest
RemoveBookFromCatalogActivity -> RemoveBookFromCatalogActivity: execute(RemoveBookFromCatalogRequest)
RemoveBookFromCatalogActivity -> CatalogDao: removeBookFromCatalog(bookId)
alt Book found and active
    CatalogDao -> RemoveBookFromCatalogActivity: CatalogItemVersion
    RemoveBookFromCatalogActivity -> CatalogItemVersion: setInactive(true)
    CatalogItemVersion -> RemoveBookFromCatalogActivity: void
    RemoveBookFromCatalogActivity -> User: RemoveBookFromCatalogResponse
else Book not found or inactive
    CatalogDao -> RemoveBookFromCatalogActivity: null
    RemoveBookFromCatalogActivity -> User: BookNotFoundException
end

@enduml